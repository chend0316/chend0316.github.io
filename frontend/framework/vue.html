<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue | 陈东的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.c0b81199.css" as="style"><link rel="preload" href="/assets/js/app.bd424e70.js" as="script"><link rel="preload" href="/assets/js/2.a259036c.js" as="script"><link rel="preload" href="/assets/js/64.87f60de6.js" as="script"><link rel="prefetch" href="/assets/js/10.8d4e754d.js"><link rel="prefetch" href="/assets/js/100.69fa2967.js"><link rel="prefetch" href="/assets/js/101.4428d439.js"><link rel="prefetch" href="/assets/js/102.8f1eabaf.js"><link rel="prefetch" href="/assets/js/103.cacba070.js"><link rel="prefetch" href="/assets/js/104.2ccfc254.js"><link rel="prefetch" href="/assets/js/105.0122aca1.js"><link rel="prefetch" href="/assets/js/106.dafb8efb.js"><link rel="prefetch" href="/assets/js/107.825ce1a6.js"><link rel="prefetch" href="/assets/js/108.f1bc87fb.js"><link rel="prefetch" href="/assets/js/109.d4e54191.js"><link rel="prefetch" href="/assets/js/11.c7c17033.js"><link rel="prefetch" href="/assets/js/110.344dde19.js"><link rel="prefetch" href="/assets/js/111.7a552cdf.js"><link rel="prefetch" href="/assets/js/112.94922b05.js"><link rel="prefetch" href="/assets/js/113.0873ede1.js"><link rel="prefetch" href="/assets/js/114.ce5941a6.js"><link rel="prefetch" href="/assets/js/115.dca87fa0.js"><link rel="prefetch" href="/assets/js/116.b86b9982.js"><link rel="prefetch" href="/assets/js/117.b22d5dcd.js"><link rel="prefetch" href="/assets/js/118.4056e765.js"><link rel="prefetch" href="/assets/js/119.69c6a64f.js"><link rel="prefetch" href="/assets/js/12.b7a39f7a.js"><link rel="prefetch" href="/assets/js/120.eb56aa09.js"><link rel="prefetch" href="/assets/js/121.aec54507.js"><link rel="prefetch" href="/assets/js/122.d9101ccb.js"><link rel="prefetch" href="/assets/js/123.e74dd01b.js"><link rel="prefetch" href="/assets/js/124.126182f8.js"><link rel="prefetch" href="/assets/js/125.7c4cb103.js"><link rel="prefetch" href="/assets/js/126.2b7176b5.js"><link rel="prefetch" href="/assets/js/127.0a48dc93.js"><link rel="prefetch" href="/assets/js/128.e72f57ef.js"><link rel="prefetch" href="/assets/js/129.95266bd4.js"><link rel="prefetch" href="/assets/js/13.08582587.js"><link rel="prefetch" href="/assets/js/130.14f74a17.js"><link rel="prefetch" href="/assets/js/14.2488aa56.js"><link rel="prefetch" href="/assets/js/15.a9f43fc7.js"><link rel="prefetch" href="/assets/js/16.38d98408.js"><link rel="prefetch" href="/assets/js/17.e4e860b1.js"><link rel="prefetch" href="/assets/js/18.1cd1047e.js"><link rel="prefetch" href="/assets/js/19.1d143351.js"><link rel="prefetch" href="/assets/js/20.c043b119.js"><link rel="prefetch" href="/assets/js/21.f08987d2.js"><link rel="prefetch" href="/assets/js/22.6741c561.js"><link rel="prefetch" href="/assets/js/23.11ac5c30.js"><link rel="prefetch" href="/assets/js/24.89b4c7e6.js"><link rel="prefetch" href="/assets/js/25.14208e1e.js"><link rel="prefetch" href="/assets/js/26.30d0b930.js"><link rel="prefetch" href="/assets/js/27.6374cfc2.js"><link rel="prefetch" href="/assets/js/28.752ed782.js"><link rel="prefetch" href="/assets/js/29.e2092680.js"><link rel="prefetch" href="/assets/js/3.0268a8df.js"><link rel="prefetch" href="/assets/js/30.d220fc62.js"><link rel="prefetch" href="/assets/js/31.ea025719.js"><link rel="prefetch" href="/assets/js/32.1aebd8dd.js"><link rel="prefetch" href="/assets/js/33.141a8a56.js"><link rel="prefetch" href="/assets/js/34.c4d73bba.js"><link rel="prefetch" href="/assets/js/35.af2ea155.js"><link rel="prefetch" href="/assets/js/36.5f213f4d.js"><link rel="prefetch" href="/assets/js/37.3e1524e8.js"><link rel="prefetch" href="/assets/js/38.419d87ff.js"><link rel="prefetch" href="/assets/js/39.31823365.js"><link rel="prefetch" href="/assets/js/4.24a14d05.js"><link rel="prefetch" href="/assets/js/40.5dbfdb43.js"><link rel="prefetch" href="/assets/js/41.924103d4.js"><link rel="prefetch" href="/assets/js/42.0c484b15.js"><link rel="prefetch" href="/assets/js/43.b530cef2.js"><link rel="prefetch" href="/assets/js/44.93bb2bf2.js"><link rel="prefetch" href="/assets/js/45.86e150f0.js"><link rel="prefetch" href="/assets/js/46.9c3b18d7.js"><link rel="prefetch" href="/assets/js/47.70f1dc21.js"><link rel="prefetch" href="/assets/js/48.5ca69823.js"><link rel="prefetch" href="/assets/js/49.0d67198c.js"><link rel="prefetch" href="/assets/js/5.00a9800f.js"><link rel="prefetch" href="/assets/js/50.d93111af.js"><link rel="prefetch" href="/assets/js/51.83ccec01.js"><link rel="prefetch" href="/assets/js/52.f8465780.js"><link rel="prefetch" href="/assets/js/53.6b9dac17.js"><link rel="prefetch" href="/assets/js/54.968889bd.js"><link rel="prefetch" href="/assets/js/55.f2319ef5.js"><link rel="prefetch" href="/assets/js/56.777d1e96.js"><link rel="prefetch" href="/assets/js/57.62c0739e.js"><link rel="prefetch" href="/assets/js/58.afc8ba61.js"><link rel="prefetch" href="/assets/js/59.5fee3a38.js"><link rel="prefetch" href="/assets/js/6.eae784de.js"><link rel="prefetch" href="/assets/js/60.c80dcbd2.js"><link rel="prefetch" href="/assets/js/61.990563cf.js"><link rel="prefetch" href="/assets/js/62.47b7d7d5.js"><link rel="prefetch" href="/assets/js/63.f3588445.js"><link rel="prefetch" href="/assets/js/65.5984694d.js"><link rel="prefetch" href="/assets/js/66.47254606.js"><link rel="prefetch" href="/assets/js/67.d253eecc.js"><link rel="prefetch" href="/assets/js/68.a54dfed8.js"><link rel="prefetch" href="/assets/js/69.882e5806.js"><link rel="prefetch" href="/assets/js/7.1b92bd42.js"><link rel="prefetch" href="/assets/js/70.1201f88e.js"><link rel="prefetch" href="/assets/js/71.dda95d8e.js"><link rel="prefetch" href="/assets/js/72.6fa97c21.js"><link rel="prefetch" href="/assets/js/73.c71b3797.js"><link rel="prefetch" href="/assets/js/74.50ece3a8.js"><link rel="prefetch" href="/assets/js/75.7c88b2b4.js"><link rel="prefetch" href="/assets/js/76.59da4816.js"><link rel="prefetch" href="/assets/js/77.15bd5a6d.js"><link rel="prefetch" href="/assets/js/78.5e7fc635.js"><link rel="prefetch" href="/assets/js/79.93f7aea8.js"><link rel="prefetch" href="/assets/js/8.978e937f.js"><link rel="prefetch" href="/assets/js/80.5e5a3bbd.js"><link rel="prefetch" href="/assets/js/81.aa5cb7fb.js"><link rel="prefetch" href="/assets/js/82.71c1dbdb.js"><link rel="prefetch" href="/assets/js/83.d473679e.js"><link rel="prefetch" href="/assets/js/84.a62cefbf.js"><link rel="prefetch" href="/assets/js/85.cb5bd1ba.js"><link rel="prefetch" href="/assets/js/86.fb9ba010.js"><link rel="prefetch" href="/assets/js/87.83577f56.js"><link rel="prefetch" href="/assets/js/88.81347b04.js"><link rel="prefetch" href="/assets/js/89.f45b34b8.js"><link rel="prefetch" href="/assets/js/9.653a6ead.js"><link rel="prefetch" href="/assets/js/90.a461dc9f.js"><link rel="prefetch" href="/assets/js/91.f0697e61.js"><link rel="prefetch" href="/assets/js/92.5813139b.js"><link rel="prefetch" href="/assets/js/93.dd6fe12b.js"><link rel="prefetch" href="/assets/js/94.08123907.js"><link rel="prefetch" href="/assets/js/95.6790689b.js"><link rel="prefetch" href="/assets/js/96.b3b072bb.js"><link rel="prefetch" href="/assets/js/97.5c17fc37.js"><link rel="prefetch" href="/assets/js/98.9c8ad208.js"><link rel="prefetch" href="/assets/js/99.71b55b90.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c0b81199.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">陈东的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序yuan成人班" class="dropdown-title"><span class="title">程序yuan成人班</span> <span class="arrow down"></span></button> <button type="button" aria-label="程序yuan成人班" class="mobile-dropdown-title"><span class="title">程序yuan成人班</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorial/frontend/" class="nav-link">
  前端开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序员基本功" class="dropdown-title"><span class="title">程序员基本功</span> <span class="arrow down"></span></button> <button type="button" aria-label="程序员基本功" class="mobile-dropdown-title"><span class="title">程序员基本功</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programmer/data-structures.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/programmer/leetcode/" class="nav-link">
  力扣算法
</a></li><li class="dropdown-item"><!----> <a href="/programmer/language/" class="nav-link">
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/programmer/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/programmer/web-architecture.html" class="nav-link">
  Web架构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/base/" class="nav-link">
  基本功
</a></li><li class="dropdown-item"><h4>
          框架 &amp; 工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/framework/" class="nav-link router-link-active">
  三大框架
</a></li><li class="dropdown-subitem"><a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          跨平台
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/mini-program/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-subitem"><a href="/frontend/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-subitem"><a href="/frontend/electron/" class="nav-link">
  Electron
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/admin-in-action/" class="nav-link">
  中后台常见需求
</a></li><li class="dropdown-subitem"><a href="/frontend/performance/" class="nav-link">
  性能
</a></li><li class="dropdown-subitem"><a href="/frontend/visualization/" class="nav-link">
  可视化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用软件" class="dropdown-title"><span class="title">通用软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="通用软件" class="mobile-dropdown-title"><span class="title">通用软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/cli-app.html" class="nav-link">
  命令行程序
</a></li><li class="dropdown-item"><!----> <a href="/backend/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/backend/database/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/backend/build-tools/" class="nav-link">
  构建工具
</a></li><li class="dropdown-item"><!----> <a href="/backend/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/cython/" class="nav-link">
  Cython
</a></li><li class="dropdown-subitem"><a href="/backend/protobuf/" class="nav-link">
  Protobuf
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机专业" class="dropdown-title"><span class="title">计算机专业</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机专业" class="mobile-dropdown-title"><span class="title">计算机专业</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/network/" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数学" class="dropdown-title"><span class="title">数学</span> <span class="arrow down"></span></button> <button type="button" aria-label="数学" class="mobile-dropdown-title"><span class="title">数学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/math/calculus/" class="nav-link">
  微积分
</a></li></ul></div></div> <a href="https://github.com/chend0316/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序yuan成人班" class="dropdown-title"><span class="title">程序yuan成人班</span> <span class="arrow down"></span></button> <button type="button" aria-label="程序yuan成人班" class="mobile-dropdown-title"><span class="title">程序yuan成人班</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorial/frontend/" class="nav-link">
  前端开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序员基本功" class="dropdown-title"><span class="title">程序员基本功</span> <span class="arrow down"></span></button> <button type="button" aria-label="程序员基本功" class="mobile-dropdown-title"><span class="title">程序员基本功</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programmer/data-structures.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/programmer/leetcode/" class="nav-link">
  力扣算法
</a></li><li class="dropdown-item"><!----> <a href="/programmer/language/" class="nav-link">
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/programmer/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/programmer/web-architecture.html" class="nav-link">
  Web架构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/base/" class="nav-link">
  基本功
</a></li><li class="dropdown-item"><h4>
          框架 &amp; 工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/framework/" class="nav-link router-link-active">
  三大框架
</a></li><li class="dropdown-subitem"><a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          跨平台
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/mini-program/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-subitem"><a href="/frontend/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-subitem"><a href="/frontend/electron/" class="nav-link">
  Electron
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/admin-in-action/" class="nav-link">
  中后台常见需求
</a></li><li class="dropdown-subitem"><a href="/frontend/performance/" class="nav-link">
  性能
</a></li><li class="dropdown-subitem"><a href="/frontend/visualization/" class="nav-link">
  可视化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用软件" class="dropdown-title"><span class="title">通用软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="通用软件" class="mobile-dropdown-title"><span class="title">通用软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/cli-app.html" class="nav-link">
  命令行程序
</a></li><li class="dropdown-item"><!----> <a href="/backend/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/backend/database/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/backend/build-tools/" class="nav-link">
  构建工具
</a></li><li class="dropdown-item"><!----> <a href="/backend/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/cython/" class="nav-link">
  Cython
</a></li><li class="dropdown-subitem"><a href="/backend/protobuf/" class="nav-link">
  Protobuf
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机专业" class="dropdown-title"><span class="title">计算机专业</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机专业" class="mobile-dropdown-title"><span class="title">计算机专业</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/network/" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数学" class="dropdown-title"><span class="title">数学</span> <span class="arrow down"></span></button> <button type="button" aria-label="数学" class="mobile-dropdown-title"><span class="title">数学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/math/calculus/" class="nav-link">
  微积分
</a></li></ul></div></div> <a href="https://github.com/chend0316/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/frontend/framework/" aria-current="page" class="sidebar-link">原理和思想</a></li><li><a href="/frontend/framework/react.html" class="sidebar-link">React</a></li><li><a href="/frontend/framework/redux.html" class="sidebar-link">Redux</a></li><li><a href="/frontend/framework/vue.html" aria-current="page" class="active sidebar-link">Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#vue-3-中的-typescript" class="sidebar-link">Vue 3 中的 TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#vetur-对-ts-的支持" class="sidebar-link">Vetur 对 TS 的支持</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#shims-vue-d-ts" class="sidebar-link">shims-vue.d.ts</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#在-vue-中使用-jsx" class="sidebar-link">在 Vue 中使用 JSX</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#对-props-入参的-ts-检查" class="sidebar-link">对 props 入参的 TS 检查</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#对-vue-进行测试" class="sidebar-link">对 Vue 进行测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#sfc" class="sidebar-link">SFC</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#snapshot-test" class="sidebar-link">Snapshot Test</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#rfc-解读" class="sidebar-link">RFC 解读</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#_0001-new-slot-syntax" class="sidebar-link">0001-new-slot-syntax</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#_0006-slots-unification" class="sidebar-link">0006-slots-unification</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#_0004-global-api-treeshaking" class="sidebar-link">0004-global-api-treeshaking</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#_0025-teleport" class="sidebar-link">0025-teleport</a></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#_0013-composition-api" class="sidebar-link">0013-composition-api</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#vue-杂谈" class="sidebar-link">Vue 杂谈</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/framework/vue.html#vue-不适合大型项目吗" class="sidebar-link">Vue 不适合大型项目吗？</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h1> <p>视图部分，Vue 需要编写 Template 模板。</p> <ul><li>Template 跟 HTML 很接近，上手容易，使用双花括号<code>{{}}</code>表示插值表达式，在插值表达式内可以编写 JS 代码。</li> <li>在插值表达式上类型检查、代码补全很坑，Vetur 虽然可以打开 Experimental Interpolation Features 选项，但仍处于实验阶段，打开后会很卡。</li></ul> <p>逻辑部分，Vue 2.x 采用 Options API，Vue 3.x 引入了 Composition API，此外还有一种 Class Style Component 目前已经被官方废弃。</p> <ul><li>Options API 对 TypeScript 类型推断非常不友好</li> <li>Composition API 一方面可以实现 AOP 面向切面，这点和 React Hooks 一样；另一方面对 TypeScript 的支持更加友好</li></ul> <p>Vue 的单文件组件 (SFC) 把 HTML、JS、CSS 都放在同一个文件里面。</p> <ul><li>这样对业务开发人员来说很好用。</li> <li>对周边生态工具的实现者来说很坑，比如：语法高亮、Webpack 打包等等都成了问题。</li> <li>对环境搭建人员来说有一些小坑，还好大多场景都可以交给 Vue CLI 处理，不需要自己配置。</li></ul> <p>Vue 的优点：</p> <ul><li>动画/过渡支持的很优雅</li> <li>VueRouter、Vuex 集成的很好，开箱即用</li></ul> <h2 id="vue-3-中的-typescript"><a href="#vue-3-中的-typescript" class="header-anchor">#</a> Vue 3 中的 TypeScript</h2> <p>本节会说 Vue 3 对 TypeScript 的支持还是不如 React 好，具体会通过以下几点展开讲解：</p> <ul><li>Vetur 插件对单 Vue 文件内的 TS 支持很好，但跨 Vue 文件会丢失 TS 类型 (这是 TypeScript 的不足)</li> <li>上一点我们说 TypeScript 的不足是指 TS 不认识 .vue 后缀的文件，TS 也提供了一些技术手段 (即编写 shims-vue.d.ts 文件)，然而在实践中还是存在许多缺陷</li> <li>如果我们使用 JSX 编写业务代码，那么就不存在 .vue 后缀的文件了，问题自然就解决了</li></ul> <h3 id="vetur-对-ts-的支持"><a href="#vetur-对-ts-的支持" class="header-anchor">#</a> Vetur 对 TS 的支持</h3> <p>VSCode 的 Vetur 插件有一个实验特性：<code>templateInterpolationService</code>，打开之后可以开启类型检查，但还是比较鸡肋 (不能实现跨 Vue 文件的检查)。</p> <details class="custom-block details"><summary>单 Vue 文件内工作良好</summary> <div class="language-vue extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- TS 报错 --&gt;</span>
    {{ obj + 1 }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'zhang'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <details class="custom-block details"><summary>跨 Vue 文件无法工作</summary> <div class="language-vue extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ color: color }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ msg.text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> PropType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'LogItem'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    msg<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Object <span class="token keyword">as</span> PropType<span class="token operator">&lt;</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'info'</span> <span class="token operator">|</span> <span class="token string">'warn'</span> <span class="token operator">|</span> <span class="token string">'error'</span><span class="token punctuation">;</span>
        text<span class="token operator">:</span> string<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> colorMapByType <span class="token operator">=</span> <span class="token punctuation">{</span> info<span class="token operator">:</span> <span class="token string">'gray'</span><span class="token punctuation">,</span> warn<span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> color <span class="token operator">=</span> colorMapByType<span class="token punctuation">[</span>props<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> color <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log-item</span> <span class="token attr-name">:msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ type: <span class="token punctuation">'</span>info<span class="token punctuation">'</span>, text: <span class="token punctuation">'</span>hello<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- msg 入参类型错误，无法检查出来 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log-item</span> <span class="token attr-name">:msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>a<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> LogItem <span class="token keyword">from</span> <span class="token string">'./components/LogItem.vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> LogItem <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <h3 id="shims-vue-d-ts"><a href="#shims-vue-d-ts" class="header-anchor">#</a> shims-vue.d.ts</h3> <p>跨 Vue 文件之所以会丢失 TS 类型，是因为我们 <code>import 'xxx.vue'</code> 的时候，后缀名是 .vue。TypeScript 不知道怎么处理 .vue 后缀的文件，所以 TypeScript 提供了一个解决方法是编写 shims-vue.d.ts 文件 (如下所示)。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/* eslint-disable */</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.vue'</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> DefineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token keyword">const</span> component<span class="token operator">:</span> DefineComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> component
<span class="token punctuation">}</span>
</code></pre></div><p>上面这种写法显然是不够的，<code>*.vue</code> 是对所有 vue 文件生效的。</p> <h3 id="在-vue-中使用-jsx"><a href="#在-vue-中使用-jsx" class="header-anchor">#</a> 在 Vue 中使用 JSX</h3> <p>Vue 有 template、JSX、render 函数这 3 种方式编写视图，前两种最终都会编译成 render 函数。</p> <p>和 React 一样，JSX 的编译需要依赖 Babel 插件，Vue 3 可以使用 <a href="https://github.com/vuejs/jsx-next" target="_blank" rel="noopener noreferrer">jsx-next<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 实现，Vue 2 可以使用 <a href="https://github.com/vuejs/jsx" target="_blank" rel="noopener noreferrer">jsx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 实现。</p> <p>而 JSX 的类型检查需要依赖 TypeScript 官方支持，和 Babel 不同 TypeScript 不支持插件扩展。React JSX 得到了 TypeScript 官方支持，然而 Vue 2 JSX 没有，二者有着一些语法区别。Vue 3 调整了 JSX 的语法并和 React 保持统一，这样 Vue 中的 JSX 也能得到 TypeScript 支持了。</p> <h3 id="对-props-入参的-ts-检查"><a href="#对-props-入参的-ts-检查" class="header-anchor">#</a> 对 props 入参的 TS 检查</h3> <p>业务代码调用组件库，为了考察 props 对 TS 的支持，我们做 4 个实验：</p> <ul><li>都采用 SFC + TS 编写，无法对 props 做类型检查</li> <li>业务代码采用 SFC + TS，组件库采用 TSX，无法对 props 做类型检查</li> <li>业务代码采用 TSX，组件库采用 SFC + TS，VSCode 不会报错，但编译时控制台会报类型错误</li> <li>都采用 TSX，VSCode 在代码编写阶段就能够报类型错误，编译时控制台也会有错误信息</li></ul> <h2 id="对-vue-进行测试"><a href="#对-vue-进行测试" class="header-anchor">#</a> 对 Vue 进行测试</h2> <h3 id="sfc"><a href="#sfc" class="header-anchor">#</a> SFC</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/test-utils'</span>
<span class="token keyword">import</span> Modal <span class="token keyword">from</span> <span class="token string">'../Modal.vue'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Modal'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>Modal<span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'div.a-class'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="snapshot-test"><a href="#snapshot-test" class="header-anchor">#</a> Snapshot Test</h3> <p>可以确保 DOM 结构不会被增量代码破坏。</p> <h2 id="rfc-解读"><a href="#rfc-解读" class="header-anchor">#</a> RFC 解读</h2> <p>Vue 的 <a href="https://github.com/vuejs/rfcs" target="_blank" rel="noopener noreferrer">RFC 仓库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 反映了 Vue 未来的发展，RFC 现在有 30 多个文档，文件名类似下面这样：</p> <ul><li>0001-new-slot-syntax.md</li> <li>0002-slot-syntax-shorthand.md</li></ul> <h3 id="_0001-new-slot-syntax"><a href="#_0001-new-slot-syntax" class="header-anchor">#</a> <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0001-new-slot-syntax.md" target="_blank" rel="noopener noreferrer">0001-new-slot-syntax<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>slot 的 API 发生了变化，因为旧的 API 不是很自然。</p> <table><thead><tr><th></th> <th>old style</th> <th>new style</th></tr></thead> <tbody><tr><td>插槽 (Slots)</td> <td></td> <td><code>&lt;foo v-slot&gt;&lt;/foo&gt;</code></td></tr> <tr><td>具名插槽 (Named Slots)</td> <td></td> <td><code>&lt;foo v-slot:name&gt;&lt;/foo&gt;</code></td></tr> <tr><td>作用域插槽 (Scoped Slots)</td> <td>一句话说不清</td> <td><code>&lt;foo v-slot=&quot;xxx&quot;&gt;&lt;/foo&gt;</code></td></tr> <tr><td>v-slot 语法糖</td> <td>无</td> <td><code>&lt;foo #name&gt;&lt;/foo&gt;</code></td></tr> <tr><td>定义插槽</td> <td></td> <td><code>&lt;div&gt;&lt;slot name=&quot;...&quot; :arg=&quot;...&quot;&gt;&lt;/slot&gt;&lt;/div&gt;</code></td></tr></tbody></table> <h3 id="_0006-slots-unification"><a href="#_0006-slots-unification" class="header-anchor">#</a> <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0006-slots-unification.md" target="_blank" rel="noopener noreferrer">0006-slots-unification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="_0004-global-api-treeshaking"><a href="#_0004-global-api-treeshaking" class="header-anchor">#</a> <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0004-global-api-treeshaking.md" target="_blank" rel="noopener noreferrer">0004-global-api-treeshaking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h4 id="tree-shaking-减小体积"><a href="#tree-shaking-减小体积" class="header-anchor">#</a> Tree Shaking 减小体积</h4> <p>Vue 3 只能使用 named imports 导包，代码如下，好处是可以让打包工具的 Tree Shaking 发挥作用，减小最终生成的 bundle 体积。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> nextTick<span class="token punctuation">,</span> observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="对多-app-实例的支持更好"><a href="#对多-app-实例的支持更好" class="header-anchor">#</a> 对多 App 实例的支持更好</h4> <p>在 Vue 2 中，业务代码使用 <code>new Vue()</code> 来创建 App。<a href="https://cn.vuejs.org/v2/guide/plugins.html" target="_blank" rel="noopener noreferrer">插件 (Plugin)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 会往 <code>Vue</code> 上 install 函数，代码如下。这样多个 App 实例共享同一个 <code>Vue</code> 原型可能会有插件冲突。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> plugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">install</span><span class="token operator">:</span> <span class="token parameter">Vue</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Vue<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 Vue 3 中，业务代码使用 <code>Vue.createApp</code> 来创建 App，插件往 app 实例上 install 函数，代码如下。这样不同 App 就可以隔离开。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> nextTick <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> plugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">install</span><span class="token operator">:</span> <span class="token parameter">app</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_0025-teleport"><a href="#_0025-teleport" class="header-anchor">#</a> <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0025-teleport.md" target="_blank" rel="noopener noreferrer">0025-teleport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="_0013-composition-api"><a href="#_0013-composition-api" class="header-anchor">#</a> <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0013-composition-api.md" target="_blank" rel="noopener noreferrer">0013-composition-api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h2 id="vue-杂谈"><a href="#vue-杂谈" class="header-anchor">#</a> Vue 杂谈</h2> <h3 id="vue-不适合大型项目吗"><a href="#vue-不适合大型项目吗" class="header-anchor">#</a> Vue 不适合大型项目吗？</h3> <p>我个人认为相比 React 来说，Vue 不适合大型项目，除非使用 Vue 3 + TSX。原因有几个：</p> <ul><li>可重构性差，组件修改 props、$emit 名字的时候，其它调用方不会在编译时报任何错误，甚至有些在运行时也不会报错；VSCode 没办法对 .vue 文件进行重构；</li> <li>TS 类型推断功能弱，一旦类型走到 Template 里面，TS 类型推断就会失效；</li> <li>缺乏组件声明功能，当你想调用他人封装的组件的时候，你甚至不知道组件的入参 (props) 和返回值 ($emit) 是什么，你必须点开其源码仔细阅读才明白；props 会声明在 options 里面，这很好；但 $emit 会散落在组件源码的各个角落；虽然 Vue 3 也可以将 $emit 声明在 options 里面，但在 VSCode 中，调用方代码还是没有代码补全；</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/chend0316/blog/edit/master/docs/frontend/framework/vue.md" target="_blank" rel="noopener noreferrer">编辑此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后编辑:</span> <span class="time">6/15/2021, 10:50:45 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bd424e70.js" defer></script><script src="/assets/js/2.a259036c.js" defer></script><script src="/assets/js/64.87f60de6.js" defer></script>
  </body>
</html>

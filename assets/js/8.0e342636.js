(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{352:function(e,t,a){e.exports=a.p+"assets/img/docker-cheat-sheet.7d8ad630.png"},353:function(e,t,a){e.exports=a.p+"assets/img/docker-cheat-sheet-2.2ecfa207.png"},385:function(e,t,a){"use strict";a.r(t);var r=a(42),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[e._v("#")]),e._v(" Docker")]),e._v(" "),r("h2",{attrs:{id:"原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[e._v("#")]),e._v(" 原理")]),e._v(" "),r("p",[e._v("Linux 提供了 "),r("a",{attrs:{href:"https://lwn.net/Articles/531114/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Namespace"),r("OutboundLink")],1),e._v(" 和 CGroup 的技术。")]),e._v(" "),r("h3",{attrs:{id:"namespace"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#namespace"}},[e._v("#")]),e._v(" Namespace")]),e._v(" "),r("p",[e._v("Namespace 是用来提供资源隔离的技术，分为好几类：Mount namespaces、UTS namespaces、IPC namespaces、PID namespaces、Network namespaces、User namespaces。")]),e._v(" "),r("p",[e._v("我们运行 "),r("code",[e._v("docker exec <容器名> ps -ef")]),e._v(" 命令，这一步的目的是在容器内运行 "),r("code",[e._v("ps -ef")]),e._v("，可以看到容器内进程误以为自己的 PID 是 1。然后我们直接在宿主机上运行 "),r("code",[e._v("ps -ef | grep xxx")]),e._v("，可以看到进程的真实 PID 不是 1。这其实就是 PID Namespace 所做的功能：实现 PID 的隔离，容器内看到的是虚拟的 PID。除此之外，其它几个 Namespace 也做了类似的功能。")]),e._v(" "),r("h3",{attrs:{id:"cgroup-control-group"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cgroup-control-group"}},[e._v("#")]),e._v(" CGroup (Control Group)")]),e._v(" "),r("p",[e._v("Namespace 实现了资源隔离，但容器使用资源是“不限量”的。CGroup 可以更具体地控制系统资源，限制容器的资源使用量。")]),e._v(" "),r("h2",{attrs:{id:"附录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[e._v("#")]),e._v(" 附录")]),e._v(" "),r("h3",{attrs:{id:"cheat-sheet"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cheat-sheet"}},[e._v("#")]),e._v(" Cheat Sheet")]),e._v(" "),r("p",[e._v("具体命令忘记了可以去搜“docker cheat sheet”。")]),e._v(" "),r("p",[r("img",{attrs:{src:a(352),alt:""}}),e._v(" "),r("a",{attrs:{href:"https://extremeautomation.io/cheatsheets/",target:"_blank",rel:"noopener noreferrer"}},[e._v("上图来源"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("img",{attrs:{src:a(353),alt:""}}),e._v(" "),r("a",{attrs:{href:"https://dockerlabs.collabnix.com/docker/cheatsheet/",target:"_blank",rel:"noopener noreferrer"}},[e._v("上图来源"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=s.exports}}]);